# Ë®≠Ë®àÊõ∏

**„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂêç**: Êà¶Áï•„Ç≥„É≥„Çµ„É´„Çø„É≥„ÉàÊèêÊ°à‰ΩúÊàê„ÉÑ„Éº„É´
**‰ΩúÊàêÊó•**: 2025-12-07

---

## üõ†Ô∏è ÊäÄË°ì„Çπ„Çø„ÉÉ„ÇØ

### „Éï„É≠„É≥„Éà„Ç®„É≥„Éâ
- **„Éï„É¨„Éº„É†„ÉØ„Éº„ÇØ**: Next.js 14 (App Router)
- **Ë®ÄË™û**: TypeScript
- **„Çπ„Çø„Ç§„É™„É≥„Ç∞**: Tailwind CSS
- **UI„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà**: Headless UIÔºà„É¢„Éº„ÉÄ„É´„ÄÅ„Éâ„É≠„ÉÉ„Éó„ÉÄ„Ç¶„É≥Á≠âÔºâ

### AIÁµ±Âêà
- **AI API**: Claude API (Anthropic)
- **Áî®ÈÄî**: ÂØæË©±ÂΩ¢Âºè„Åß„ÅÆÈ™®Â≠êË®ÄË™ûÂåñ„Çµ„Éù„Éº„Éà„ÄÅË™≤È°å„ÅÆÊ∑±Êéò„ÇäË≥™ÂïèÁîüÊàê

### „Éá„Éº„ÇøÁÆ°ÁêÜ
- **MVP**: localStorageÔºà„Éñ„É©„Ç¶„Ç∂„É≠„Éº„Ç´„É´‰øùÂ≠òÔºâ
- **Â∞ÜÊù•**: SupabaseÔºàPostgreSQL + Ë™çË®º + „É™„Ç¢„É´„Çø„Ç§„É†ÂêåÊúüÔºâ

### „Éï„Ç°„Ç§„É´ÁîüÊàê
- **PowerPoint**: pptxgenjsÔºàPPTXÂΩ¢Âºè„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÔºâ
- **Excel**: ExcelJSÔºàË¶ãÁ©ç„ÇÇ„ÇäÊ†πÊã† - Â∞ÜÊù•Ê©üËÉΩÔºâ

### „Éá„Éó„É≠„Ç§
- **„Éõ„Çπ„ÉÜ„Ç£„É≥„Ç∞**: Vercel
- **CI/CD**: VercelËá™Âãï„Éá„Éó„É≠„Ç§ÔºàGitHubÈÄ£Êê∫Ôºâ

---

## üèóÔ∏è „Ç∑„Çπ„ÉÜ„É†„Ç¢„Éº„Ç≠„ÉÜ„ÇØ„ÉÅ„É£

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        „É¶„Éº„Ç∂„Éº                              ‚îÇ
‚îÇ                   (PC / iPad / „Éñ„É©„Ç¶„Ç∂)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Next.js App Router                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ   UI Layer   ‚îÇ  ‚îÇ Logic Layer  ‚îÇ  ‚îÇ  Data Layer  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  (Pages/     ‚îÇ‚Üí ‚îÇ  (Hooks/     ‚îÇ‚Üí ‚îÇ (localStorage‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  Components) ‚îÇ  ‚îÇ   Utils)     ‚îÇ  ‚îÇ  / Supabase) ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îÇ                 ‚îÇ
             ‚ñº                 ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Claude API    ‚îÇ  ‚îÇ   pptxgenjs    ‚îÇ
    ‚îÇ (ÂØæË©±AI)       ‚îÇ  ‚îÇ (PPTXÁîüÊàê)     ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### „Éá„Éº„Çø„Éï„É≠„ÉºÔºàMVPÔºâ

```
1. „É¶„Éº„Ç∂„ÉºÂÖ•Âäõ
   ‚Üì
2. Claude API„ÅßÂØæË©±„ÉªË®ÄË™ûÂåñ„Çµ„Éù„Éº„Éà
   ‚Üì
3. È™®Â≠ê„Éá„Éº„Çø„ÇílocalStorage„Å´‰øùÂ≠ò
   ‚Üì
4. „Çπ„É©„Ç§„ÉâË¶ÅÁ¥†ÈÅ∏Êäû
   ‚Üì
5. pptxgenjs„ÅßPPTXÁîüÊàê
   ‚Üì
6. „ÉÄ„Ç¶„É≥„É≠„Éº„Éâ
```

---

## üì¶ „Ç≥„É≥„Éù„Éº„Éç„É≥„ÉàË®≠Ë®à

### „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÊßãÊàê

```
app/
‚îú‚îÄ‚îÄ page.tsx                    # „É©„É≥„Éá„Ç£„É≥„Ç∞„Éö„Éº„Ç∏
‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx               # „Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß
‚îú‚îÄ‚îÄ proposal/
‚îÇ   ‚îú‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # ÊèêÊ°àÊõ∏Á∑®ÈõÜ„É°„Ç§„É≥ÁîªÈù¢
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ outline/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # È™®Â≠ê‰ΩúÊàêÔºà„Çπ„ÉÜ„ÉÉ„Éó1Ôºâ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slides/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # „Çπ„É©„Ç§„ÉâÈÅ∏ÊäûÔºà„Çπ„ÉÜ„ÉÉ„Éó2Ôºâ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ export/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx      # „Ç®„ÇØ„Çπ„Éù„Éº„ÉàÔºà„Çπ„ÉÜ„ÉÉ„Éó3Ôºâ
components/
‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx            # „Éò„ÉÉ„ÉÄ„Éº
‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx           # „Çµ„Ç§„Éâ„Éê„ÉºÔºà„Çπ„ÉÜ„ÉÉ„Éó„Éä„ÉìÔºâ
‚îÇ   ‚îî‚îÄ‚îÄ Footer.tsx            # „Éï„ÉÉ„Çø„Éº
‚îú‚îÄ‚îÄ outline/
‚îÇ   ‚îú‚îÄ‚îÄ ChatInterface.tsx     # AIÂØæË©±UI
‚îÇ   ‚îú‚îÄ‚îÄ OutlineForm.tsx       # È™®Â≠êÂÖ•Âäõ„Éï„Ç©„Éº„É†
‚îÇ   ‚îú‚îÄ‚îÄ CurrentRecognition.tsx # ÁèæÁä∂Ë™çË≠ò„Çª„ÇØ„Ç∑„Éß„É≥
‚îÇ   ‚îú‚îÄ‚îÄ IssueSetting.tsx      # Ë™≤È°å‰ªÆË™¨„Çª„ÇØ„Ç∑„Éß„É≥
‚îÇ   ‚îî‚îÄ‚îÄ ToBeVision.tsx        # ToBeÂÉè„Çª„ÇØ„Ç∑„Éß„É≥
‚îú‚îÄ‚îÄ slides/
‚îÇ   ‚îú‚îÄ‚îÄ SlideSelector.tsx     # „Çπ„É©„Ç§„ÉâË¶ÅÁ¥†ÈÅ∏ÊäûUI
‚îÇ   ‚îú‚îÄ‚îÄ SlidePreview.tsx      # „Çπ„É©„Ç§„Éâ„Éó„É¨„Éì„É•„Éº
‚îÇ   ‚îî‚îÄ‚îÄ SlideOrderEditor.tsx  # „Çπ„É©„Ç§„ÉâÈ†ÜÂ∫èÁ∑®ÈõÜ
‚îú‚îÄ‚îÄ export/
‚îÇ   ‚îú‚îÄ‚îÄ ExportPreview.tsx     # „Ç®„ÇØ„Çπ„Éù„Éº„ÉàÂâç„Éó„É¨„Éì„É•„Éº
‚îÇ   ‚îî‚îÄ‚îÄ ExportButton.tsx      # „Ç®„ÇØ„Çπ„Éù„Éº„Éà„Éú„Çø„É≥
‚îî‚îÄ‚îÄ common/
    ‚îú‚îÄ‚îÄ Button.tsx            # ÂÖ±ÈÄö„Éú„Çø„É≥
    ‚îú‚îÄ‚îÄ Input.tsx             # ÂÖ±ÈÄöÂÖ•Âäõ„Éï„Ç£„Éº„É´„Éâ
    ‚îú‚îÄ‚îÄ Card.tsx              # ÂÖ±ÈÄö„Ç´„Éº„Éâ
    ‚îî‚îÄ‚îÄ ProgressBar.tsx       # ÈÄ≤Êçó„Éê„Éº
```

---

## üìä „Éá„Éº„Çø„É¢„Éá„É´

### ÂûãÂÆöÁæ©Ôºàtypes/index.tsÔºâ

```typescript
// „Éó„É≠„Ç∏„Çß„ÇØ„ÉàÂÖ®‰Ωì
export type Proposal = {
  id: string;
  title: string;
  clientName: string;
  createdAt: number;
  updatedAt: number;
  status: 'draft' | 'in_progress' | 'completed';
  outline: Outline;
  slides: SlideElement[];
  settings: ProposalSettings;
};

// È™®Â≠ê„Éá„Éº„Çø
export type Outline = {
  currentRecognition: CurrentRecognition;
  issueSetting: IssueSetting;
  toBeVision: ToBeVision;
  approach: Approach;
};

// ÁèæÁä∂Ë™çË≠ò
export type CurrentRecognition = {
  industry?: string;
  companyOverview?: string;
  background: string;
  backgroundLayer: 'industry' | 'company' | 'division' | 'department';
  currentProblems: string[];
  rootCauseHypothesis: string[];
};

// Ë™≤È°å‰ªÆË™¨
export type IssueSetting = {
  criticalIssues: string[];
  issueTree?: IssueTreeNode;
};

export type IssueTreeNode = {
  id: string;
  label: string;
  children?: IssueTreeNode[];
};

// ToBeÂÉè
export type ToBeVision = {
  vision: string;
  goals: string[];
  projectScope: string;
};

// „Ç¢„Éó„É≠„Éº„ÉÅ
export type Approach = {
  overview: string;
  methodology: string;
  steps: ApproachStep[];
  schedule?: Schedule;
  team?: Team;
};

export type ApproachStep = {
  id: string;
  order: number;
  title: string;
  description: string;
  deliverables: string[];
};

export type Schedule = {
  startDate: string;
  endDate: string;
  weeks: WeekSchedule[];
};

export type WeekSchedule = {
  weekNumber: number;
  stepIds: string[];
};

export type Team = {
  totalHeadcount: number;
  roles: TeamRole[];
};

export type TeamRole = {
  role: string;
  headcount: number;
  manDays: number;
};

// „Çπ„É©„Ç§„ÉâË¶ÅÁ¥†
export type SlideElement = {
  id: string;
  type: SlideType;
  order: number;
  title: string;
  mainMessage: string;
  content: SlideContent;
  isRequired: boolean;
};

export type SlideType =
  | 'executive_summary'
  | 'current_recognition'
  | 'issue_setting'
  | 'issue_tree'
  | 'tobe_vision'
  | 'project_goal'
  | 'approach_overview'
  | 'approach_detail'
  | 'why_this_approach'
  | 'schedule'
  | 'team'
  | 'meeting_structure'
  | 'estimate'
  | 'estimate_assumptions'
  | 'project_members'
  | 'appendix';

export type SlideContent = {
  text?: string;
  bullets?: string[];
  table?: TableData;
  diagram?: DiagramData;
};

export type TableData = {
  headers: string[];
  rows: string[][];
};

export type DiagramData = {
  type: 'tree' | 'flow' | 'gantt';
  data: any;
};

// Ë®≠ÂÆö
export type ProposalSettings = {
  template: 'default' | 'custom';
  colors: ColorScheme;
  font: FontSettings;
};

export type ColorScheme = {
  primary: string;
  secondary: string;
  accent: string;
  text: string;
  background: string;
};

export type FontSettings = {
  family: string;
  sizes: {
    title: number;
    heading: number;
    body: number;
  };
};

// AIÂØæË©±Â±•Ê≠¥
export type ChatMessage = {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: number;
};

export type ChatSession = {
  proposalId: string;
  section: 'current_recognition' | 'issue_setting' | 'tobe_vision' | 'approach';
  messages: ChatMessage[];
};
```

---

## üé® UI/UX„Éá„Ç∂„Ç§„É≥

### „Ç´„É©„Éº„Éë„É¨„ÉÉ„ÉàÔºà„Éá„Éï„Ç©„É´„ÉàÔºâ

```css
:root {
  /* „Éó„É©„Ç§„Éû„É™„Ç´„É©„ÉºÔºà„Ç≥„É≥„Çµ„É´È¢®„ÅÆËêΩ„Å°ÁùÄ„ÅÑ„Åü„Éñ„É´„ÉºÔºâ */
  --color-primary: #1e3a8a;      /* ÊøÉÁ¥∫ */
  --color-secondary: #3b82f6;    /* Êòé„Çã„ÅÑ„Éñ„É´„Éº */

  /* „Ç¢„ÇØ„Çª„É≥„Éà„Ç´„É©„Éº */
  --color-accent: #f59e0b;       /* „Ç™„É¨„É≥„Ç∏ÔºàÂº∑Ë™øÁî®Ôºâ */

  /* „Éã„É•„Éº„Éà„É©„É´„Ç´„É©„Éº */
  --color-gray-50: #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;

  /* „ÉÜ„Ç≠„Çπ„Éà„Ç´„É©„Éº */
  --color-text-primary: #111827;
  --color-text-secondary: #6b7280;

  /* ËÉåÊôØ„Ç´„É©„Éº */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f9fafb;
}
```

### „Çø„Ç§„Éù„Ç∞„É©„Éï„Ç£

```css
:root {
  /* „Éï„Ç©„É≥„Éà„Éï„Ç°„Éü„É™„Éº */
  --font-sans: 'Inter', 'Noto Sans JP', sans-serif;

  /* „Éï„Ç©„É≥„Éà„Çµ„Ç§„Ç∫ */
  --text-xs: 0.75rem;    /* 12px */
  --text-sm: 0.875rem;   /* 14px */
  --text-base: 1rem;     /* 16px */
  --text-lg: 1.125rem;   /* 18px */
  --text-xl: 1.25rem;    /* 20px */
  --text-2xl: 1.5rem;    /* 24px */
  --text-3xl: 1.875rem;  /* 30px */
  --text-4xl: 2.25rem;   /* 36px */
}
```

### „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥

```css
/* „Éñ„É¨„Éº„ÇØ„Éù„Ç§„É≥„Éà */
--breakpoint-sm: 640px;   /* „É¢„Éê„Ç§„É´ */
--breakpoint-md: 768px;   /* „Çø„Éñ„É¨„ÉÉ„Éà */
--breakpoint-lg: 1024px;  /* „Éá„Çπ„ÇØ„Éà„ÉÉ„Éó */
--breakpoint-xl: 1280px;  /* Â§ßÁîªÈù¢ */
```

#### „É¨„Ç§„Ç¢„Ç¶„ÉàÊñπÈáù
- **„É¢„Éê„Ç§„É´Ôºà„Äú768pxÔºâ**: „Ç∑„É≥„Ç∞„É´„Ç´„É©„É†„É¨„Ç§„Ç¢„Ç¶„Éà„ÄÅ„Éè„É≥„Éê„Éº„Ç¨„Éº„É°„Éã„É•„Éº
- **„Çø„Éñ„É¨„ÉÉ„ÉàÔºà768px„Äú1024pxÔºâ**: „Çµ„Ç§„Éâ„Éê„ÉºÊäò„Çä„Åü„Åü„ÅøÂèØËÉΩ
- **„Éá„Çπ„ÇØ„Éà„ÉÉ„ÉóÔºà1024px„ÄúÔºâ**: „Çµ„Ç§„Éâ„Éê„ÉºÂ∏∏ÊôÇË°®Á§∫„ÄÅ2„Ç´„É©„É†„É¨„Ç§„Ç¢„Ç¶„Éà

### iPadÂØæÂøúÔºà„Çø„ÉÉ„ÉÅUIÔºâ

- „Çø„ÉÉ„ÉÅ„Çø„Éº„Ç≤„ÉÉ„Éà„Çµ„Ç§„Ç∫: ÊúÄÂ∞è44px √ó 44px
- „Çπ„ÉØ„Ç§„Éó„Ç∏„Çß„Çπ„ÉÅ„É£: „Çπ„ÉÜ„ÉÉ„ÉóÈñì„ÅÆÈÅ∑Áßª
- „Éî„É≥„ÉÅ„Ç∫„Éº„É†: „Çπ„É©„Ç§„Éâ„Éó„É¨„Éì„É•„Éº
- Apple PencilÂØæÂøú: Â∞ÜÊù•Ê©üËÉΩÔºàÊâãÊõ∏„ÅçÂÖ•ÂäõÔºâ

---

## üîÑ Áä∂ÊÖãÁÆ°ÁêÜ

### „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏ÔºàMVPÔºâ

```typescript
// lib/storage.ts

export const STORAGE_KEYS = {
  PROPOSALS: 'proposals',
  CURRENT_PROPOSAL_ID: 'currentProposalId',
  CHAT_SESSIONS: 'chatSessions',
  SETTINGS: 'settings',
};

export const saveProposal = (proposal: Proposal): void => {
  const proposals = getProposals();
  const index = proposals.findIndex(p => p.id === proposal.id);

  if (index >= 0) {
    proposals[index] = proposal;
  } else {
    proposals.push(proposal);
  }

  localStorage.setItem(STORAGE_KEYS.PROPOSALS, JSON.stringify(proposals));
};

export const getProposals = (): Proposal[] => {
  const data = localStorage.getItem(STORAGE_KEYS.PROPOSALS);
  return data ? JSON.parse(data) : [];
};

export const getProposal = (id: string): Proposal | null => {
  const proposals = getProposals();
  return proposals.find(p => p.id === id) || null;
};

export const deleteProposal = (id: string): void => {
  const proposals = getProposals().filter(p => p.id !== id);
  localStorage.setItem(STORAGE_KEYS.PROPOSALS, JSON.stringify(proposals));
};
```

### „Ç´„Çπ„Çø„É†„Éï„ÉÉ„ÇØ

```typescript
// hooks/useProposal.ts

export const useProposal = (id: string) => {
  const [proposal, setProposal] = useState<Proposal | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const data = getProposal(id);
    setProposal(data);
    setLoading(false);
  }, [id]);

  const updateProposal = (updates: Partial<Proposal>) => {
    if (!proposal) return;

    const updated = { ...proposal, ...updates, updatedAt: Date.now() };
    saveProposal(updated);
    setProposal(updated);
  };

  return { proposal, loading, updateProposal };
};
```

```typescript
// hooks/useChat.ts

export const useChat = (proposalId: string, section: string) => {
  const [messages, setMessages] = useState<ChatMessage[]>([]);
  const [loading, setLoading] = useState(false);

  const sendMessage = async (content: string) => {
    const userMessage: ChatMessage = {
      id: generateId(),
      role: 'user',
      content,
      timestamp: Date.now(),
    };

    setMessages(prev => [...prev, userMessage]);
    setLoading(true);

    try {
      const response = await fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ messages: [...messages, userMessage], section }),
      });

      const data = await response.json();

      const assistantMessage: ChatMessage = {
        id: generateId(),
        role: 'assistant',
        content: data.content,
        timestamp: Date.now(),
      };

      setMessages(prev => [...prev, assistantMessage]);
    } catch (error) {
      console.error('Chat error:', error);
    } finally {
      setLoading(false);
    }
  };

  return { messages, sendMessage, loading };
};
```

---

## üîå APIË®≠Ë®à

### Claude APIÁµ±ÂêàÔºà/api/chatÔºâ

```typescript
// app/api/chat/route.ts

import Anthropic from '@anthropic-ai/sdk';

const client = new Anthropic({
  apiKey: process.env.ANTHROPIC_API_KEY,
});

export async function POST(request: Request) {
  const { messages, section } = await request.json();

  const systemPrompt = getSystemPrompt(section);

  try {
    const response = await client.messages.create({
      model: 'claude-3-5-sonnet-20241022',
      max_tokens: 4096,
      system: systemPrompt,
      messages: messages.map((m: ChatMessage) => ({
        role: m.role,
        content: m.content,
      })),
    });

    return Response.json({
      content: response.content[0].text,
    });
  } catch (error) {
    console.error('Claude API error:', error);
    return Response.json({ error: 'AIÂá¶ÁêÜ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü' }, { status: 500 });
  }
}

function getSystemPrompt(section: string): string {
  const prompts = {
    current_recognition: `„ÅÇ„Å™„Åü„ÅØÊà¶Áï•„Ç≥„É≥„Çµ„É´„Çø„É≥„Éà„ÅÆ„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Åß„Åô„ÄÇ
„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅÆÁèæÁä∂Ë™çË≠òÔºàËÉåÊôØ„ÄÅÂïèÈ°å„ÄÅÂéüÂõ†‰ªÆË™¨Ôºâ„ÇíË®ÄË™ûÂåñ„Åô„Çã„Çµ„Éù„Éº„Éà„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

- ÊÉÖÂ†±„Åå‰∏çË∂≥„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØ„ÄÅÂÖ∑‰ΩìÁöÑ„Å™Ë≥™Âïè„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ
- ‰∏ÄËà¨Ë´ñ„ÅßÊé®Ê∏¨„Åõ„Åö„ÄÅÂøÖË¶Å„Å™ÊÉÖÂ†±„ÇíÊòéÁ¢∫„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ
- ËÉåÊôØ„ÅÆ„É¨„Ç§„É§„ÉºÔºàÊ•≠Áïå/ÂÖ®Á§æ/‰∫ãÊ•≠ÈÉ®Á≠âÔºâ„ÇíÊÑèË≠ò„Åó„Å¶„Åè„Å†„Åï„ÅÑ`,

    issue_setting: `„ÅÇ„Å™„Åü„ÅØÊà¶Áï•„Ç≥„É≥„Çµ„É´„Çø„É≥„Éà„ÅÆ„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Åß„Åô„ÄÇ
ÂéüÂõ†‰ªÆË™¨„Åã„ÇâÂ∞é„Åã„Çå„Çã„ÇØ„É™„ÉÜ„Ç£„Ç´„É´„Å™Ë™≤È°å„ÇíÁâπÂÆö„Åô„Çã„Çµ„Éù„Éº„Éà„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

- MECEÔºàÊºè„Çå„Å™„Åè„ÉÄ„Éñ„Çä„Å™„ÅèÔºâ„ÇíÊÑèË≠ò„Åó„Å¶„Åè„Å†„Åï„ÅÑ
- Ë§áÊï∞„ÅÆË™≤È°åÂÄôË£ú„ÇíÊèêÁ§∫„Åó„ÄÅÊúÄ„ÇÇ„ÇØ„É™„ÉÜ„Ç£„Ç´„É´„Å™„ÇÇ„ÅÆ„ÇíÈÅ∏Êäû„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ
- Ë™≤È°åË®≠ÂÆö„Åå‰∏çÂçÅÂàÜ„Å™Â†¥Âêà„ÅØ„ÄÅÊ∑±Êéò„ÇäË≥™Âïè„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ`,

    tobe_vision: `„ÅÇ„Å™„Åü„ÅØÊà¶Áï•„Ç≥„É≥„Çµ„É´„Çø„É≥„Éà„ÅÆ„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Åß„Åô„ÄÇ
Â∞ÜÊù•„ÅÆÁõÆÊåá„Åô„Åπ„ÅçÂßøÔºàToBeÂÉèÔºâ„Å®„Ç¢„Éó„É≠„Éº„ÉÅÊñπÈáù„ÇíË®ÄË™ûÂåñ„Åô„Çã„Çµ„Éù„Éº„Éà„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

- Ë™≤È°å„ÇíËß£Ê±∫„Åó„ÅüÂÖà„ÅÆÁêÜÊÉ≥ÁöÑ„Å™Áä∂ÊÖã„ÇíÊòéÁ¢∫„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ
- ÁèæÁä∂„Å®ToBe„ÅÆ„ÇÆ„É£„ÉÉ„Éó„Åã„Çâ„ÄÅ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Çπ„Ç≥„Éº„Éó„ÇíÂ∞é„ÅÑ„Å¶„Åè„Å†„Åï„ÅÑ
- ÂÖ∑‰ΩìÁöÑ„Å™„Ç¢„Éó„É≠„Éº„ÉÅ„Çπ„ÉÜ„ÉÉ„Éó„ÇíÊßãÈÄ†Âåñ„Åó„Å¶„Åè„Å†„Åï„ÅÑ`,

    approach: `„ÅÇ„Å™„Åü„ÅØÊà¶Áï•„Ç≥„É≥„Çµ„É´„Çø„É≥„Éà„ÅÆ„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Åß„Åô„ÄÇ
„Ç¢„Éó„É≠„Éº„ÉÅ„ÅÆË©≥Á¥∞„ÇíË®ÄË™ûÂåñ„Åô„Çã„Çµ„Éù„Éº„Éà„Çí„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

- ÂêÑ„Çπ„ÉÜ„ÉÉ„Éó„ÅÆÁõÆÁöÑ„Å®ÊàêÊûúÁâ©„ÇíÊòéÁ¢∫„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ
- „É≠„Ç∏„Ç´„É´„Å™ÊµÅ„Çå„ÇíÊÑèË≠ò„Åó„Å¶„Åè„Å†„Åï„ÅÑ`,
  };

  return prompts[section as keyof typeof prompts] || prompts.current_recognition;
}
```

### PPTX„Ç®„ÇØ„Çπ„Éù„Éº„ÉàAPIÔºà/api/export/pptxÔºâ

```typescript
// app/api/export/pptx/route.ts

import PptxGenJS from 'pptxgenjs';

export async function POST(request: Request) {
  const { proposal } = await request.json();

  try {
    const pptx = new PptxGenJS();

    // „Çπ„É©„Ç§„ÉâË®≠ÂÆö
    pptx.layout = 'LAYOUT_16x9';
    pptx.author = 'Strategy Consultant Tool';

    // „Ç´„É©„ÉºË®≠ÂÆö
    const colors = proposal.settings.colors;

    // „Çπ„É©„Ç§„ÉâÁîüÊàê
    proposal.slides.forEach((slide: SlideElement) => {
      const pptxSlide = pptx.addSlide();

      // „Çø„Ç§„Éà„É´
      pptxSlide.addText(slide.title, {
        x: 0.5,
        y: 0.3,
        w: 9,
        h: 0.5,
        fontSize: 24,
        bold: true,
        color: colors.primary,
      });

      // „É°„Ç§„É≥„É°„ÉÉ„Çª„Éº„Ç∏
      pptxSlide.addText(slide.mainMessage, {
        x: 0.5,
        y: 1.0,
        w: 9,
        h: 0.4,
        fontSize: 18,
        color: colors.accent,
      });

      // „Ç≥„É≥„ÉÜ„É≥„ÉÑ
      if (slide.content.bullets) {
        pptxSlide.addText(slide.content.bullets, {
          x: 0.5,
          y: 1.6,
          w: 9,
          h: 4,
          fontSize: 14,
          bullet: true,
          color: colors.text,
        });
      }

      if (slide.content.table) {
        pptxSlide.addTable(
          [slide.content.table.headers, ...slide.content.table.rows],
          {
            x: 0.5,
            y: 1.6,
            w: 9,
            colW: Array(slide.content.table.headers.length).fill(9 / slide.content.table.headers.length),
            fontSize: 12,
          }
        );
      }
    });

    // „Éï„Ç°„Ç§„É´ÁîüÊàê
    const buffer = await pptx.write({ outputType: 'nodebuffer' });

    return new Response(buffer, {
      headers: {
        'Content-Type': 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
        'Content-Disposition': `attachment; filename="${proposal.title}.pptx"`,
      },
    });
  } catch (error) {
    console.error('PPTX generation error:', error);
    return Response.json({ error: 'PPTXÁîüÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü' }, { status: 500 });
  }
}
```

---

## üîê „Çª„Ç≠„É•„É™„ÉÜ„Ç£Ë®≠Ë®à

### Áí∞Â¢ÉÂ§âÊï∞ÁÆ°ÁêÜ

```bash
# .env.local

# Claude API
ANTHROPIC_API_KEY=sk-ant-xxx

# Â∞ÜÊù•Ê©üËÉΩÔºàSupabaseÔºâ
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
SUPABASE_SERVICE_ROLE_KEY=xxx
```

### „Éá„Éº„ÇøÊöóÂè∑ÂåñÔºàÂ∞ÜÊù•Ê©üËÉΩÔºâ

```typescript
// lib/encryption.ts

import CryptoJS from 'crypto-js';

const SECRET_KEY = process.env.ENCRYPTION_SECRET_KEY!;

export const encrypt = (data: string): string => {
  return CryptoJS.AES.encrypt(data, SECRET_KEY).toString();
};

export const decrypt = (encrypted: string): string => {
  const bytes = CryptoJS.AES.decrypt(encrypted, SECRET_KEY);
  return bytes.toString(CryptoJS.enc.Utf8);
};
```

### API‰øùË≠∑

```typescript
// middleware.ts

import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export function middleware(request: NextRequest) {
  // API route„ÅÆ‰øùË≠∑
  if (request.nextUrl.pathname.startsWith('/api/')) {
    const apiKey = request.headers.get('x-api-key');

    // „É≠„Éº„Ç´„É´ÈñãÁô∫Áí∞Â¢É„Åß„ÅØ„Çπ„Ç≠„ÉÉ„Éó
    if (process.env.NODE_ENV === 'development') {
      return NextResponse.next();
    }

    // Êú¨Áï™Áí∞Â¢É„Åß„ÅØË™çË®º„ÉÅ„Çß„ÉÉ„ÇØÔºàÂ∞ÜÊù•Ê©üËÉΩÔºâ
    // if (!apiKey || !isValidApiKey(apiKey)) {
    //   return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    // }
  }

  return NextResponse.next();
}
```

---

## üß™ „ÉÜ„Çπ„ÉàÊà¶Áï•ÔºàÂ∞ÜÊù•Ê©üËÉΩÔºâ

### „É¶„Éã„ÉÉ„Éà„ÉÜ„Çπ„Éà
- **„ÉÑ„Éº„É´**: Jest + React Testing Library
- **ÂØæË±°**: UtilsÈñ¢Êï∞„ÄÅ„Ç´„Çπ„Çø„É†„Éï„ÉÉ„ÇØ

### E2E„ÉÜ„Çπ„Éà
- **„ÉÑ„Éº„É´**: Playwright
- **ÂØæË±°**: „É¶„Éº„Ç∂„Éº„Éï„É≠„ÉºÂÖ®‰ΩìÔºàÈ™®Â≠ê‰ΩúÊàê‚Üí„Çπ„É©„Ç§„ÉâÈÅ∏Êäû‚Üí„Ç®„ÇØ„Çπ„Éù„Éº„ÉàÔºâ

---

## üìà „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊúÄÈÅ©Âåñ

### „Ç≥„Éº„ÉâÂàÜÂâ≤
```typescript
// ÂãïÁöÑ„Ç§„É≥„Éù„Éº„Éà
const ChatInterface = dynamic(() => import('@/components/outline/ChatInterface'), {
  loading: () => <Spinner />,
});
```

### ÁîªÂÉèÊúÄÈÅ©Âåñ
- Next.js„ÅÆ`<Image>`„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà‰ΩøÁî®
- WebPÂΩ¢Âºè„Åß„ÅÆÈÖç‰ø°

### „Ç≠„É£„ÉÉ„Ç∑„É≥„Ç∞
- localStorage„Åß„ÅÆËá™Âãï‰øùÂ≠òÔºà500ms debounceÔºâ
- SWRÔºàÂ∞ÜÊù•„ÅÆSupabaseÈÄ£Êê∫ÊôÇÔºâ

---

## üöÄ „Éá„Éó„É≠„Ç§Ë®≠ÂÆö

### VercelË®≠ÂÆö

```json
// vercel.json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "env": {
    "ANTHROPIC_API_KEY": "@anthropic-api-key"
  }
}
```

### Áí∞Â¢ÉÂ§âÊï∞ÔºàVercel DashboardÔºâ
- `ANTHROPIC_API_KEY`: Claude API„Ç≠„Éº
- `NODE_ENV`: production

---

## üîÑ Â∞ÜÊù•Êã°ÂºµÔºà„Éï„Çß„Éº„Ç∫2‰ª•ÈôçÔºâ

### SupabaseÈÄ£Êê∫

```typescript
// lib/supabase.ts

import { createClient } from '@supabase/supabase-js';

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
);

export const syncProposal = async (proposal: Proposal) => {
  const { data, error } = await supabase
    .from('proposals')
    .upsert(proposal)
    .select();

  if (error) throw error;
  return data;
};
```

### „Éá„Éº„Çø„Éô„Éº„Çπ„Çπ„Ç≠„Éº„Éû

```sql
-- proposals table
CREATE TABLE proposals (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id),
  title TEXT NOT NULL,
  client_name TEXT NOT NULL,
  outline JSONB NOT NULL,
  slides JSONB NOT NULL,
  settings JSONB NOT NULL,
  status TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- chat_sessions table
CREATE TABLE chat_sessions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  proposal_id UUID REFERENCES proposals(id),
  section TEXT NOT NULL,
  messages JSONB NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- team_members table (Â∞ÜÊù•Ê©üËÉΩ)
CREATE TABLE team_members (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES auth.users(id),
  name TEXT NOT NULL,
  role TEXT NOT NULL,
  skills TEXT[] NOT NULL,
  past_projects JSONB,
  unit_price DECIMAL NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

**‰ΩúÊàêÊó•**: 2025-12-07
